# UUID Usage Guide

This document outlines how UUIDs are generated and used throughout the frontend application.

## UUID Utility (`src/utils/uuid.ts`)

The UUID utility provides functions for generating unique identifiers for different entity types:

### Core Functions
- `generateId()` - Core UUID generation with fallback support
- `isValidUUID(uuid: string)` - Validates UUID format

### Entity-Specific Functions
- `generateMenuItemId()` - For menu items
- `generateCategoryId()` - For menu categories
- `generateMenuItemOptionId()` - For menu item options
- `generateMenuItemOptionValueId()` - For menu item option values
- `generateCartItemId()` - For cart items
- `generateOrderId()` - For orders (if needed on frontend)
- `generateOrderItemId()` - For order items
- `generateAddressId()` - For addresses (if needed on frontend)
- `generatePaymentMethodId()` - For payment methods (if needed on frontend)
- `generateSessionId()` - For user sessions (if needed on frontend)
- `generateReviewId()` - For reviews (if needed on frontend)

## Current UUID Usage

### 1. Cart Service (`src/services/cart.ts`)
- **Line 33**: Uses `generateCartItemId()` when adding new items to cart
- **Purpose**: Each cart item gets a unique UUID for tracking and manipulation

### 2. Admin Menu Service (`src/services/adminMenu.ts`)
- **Menu Items**: Uses `generateMenuItemId()` for new menu items
- **Categories**: Uses `generateCategoryId()` for new menu categories  
- **Options**: Uses `generateMenuItemOptionId()` for menu item options
- **Option Values**: Uses `generateMenuItemOptionValueId()` for option values

## Backend vs Frontend UUID Generation

### Backend Handles:
- User registration (user IDs generated by backend)
- Order creation (order IDs generated by backend)
- Address creation (address IDs generated by backend)
- Payment method creation (payment method IDs generated by backend)
- User sessions (session IDs generated by backend)
- Review creation (review IDs generated by backend)

### Frontend Generates:
- Cart item IDs (temporary, client-side only)
- Admin menu item creation (sent to backend with pre-generated UUID)
- Admin menu category creation (sent to backend with pre-generated UUID)
- Menu item options and values (when creating/editing menu items)

## Implementation Examples

### Creating a New Menu Item (Admin)
```typescript
import { AdminMenuService } from '../services/adminMenu';

const newMenuItem = await AdminMenuService.createMenuItem({
  name: 'New Pizza',
  description: 'Delicious new pizza',
  price: 15.99,
  categoryId: 'existing-category-uuid',
  isVegetarian: false,
  options: [
    {
      name: 'Size',
      type: 'single',
      required: true,
      values: [
        { name: 'Small', price: 0 },
        { name: 'Large', price: 5 }
      ]
    }
  ]
});
// UUID generation handled automatically by AdminMenuService
```

### Adding Item to Cart
```typescript
import { CartService } from '../services/cart';

await CartService.addItem(menuItem, 2, selectedOptions);
// Cart item UUID generated automatically
```

## Best Practices

1. **Use Entity-Specific Functions**: Always use the appropriate generator (e.g., `generateMenuItemId()` for menu items)
2. **Frontend vs Backend**: Frontend generates UUIDs for:
   - Temporary client-side items (cart items)
   - Admin-created entities that will be sent to backend
3. **Validation**: Use `isValidUUID()` to validate UUIDs received from external sources
4. **Consistency**: All UUIDs follow RFC 4122 standard format

## Database Alignment

The frontend UUID generation aligns with the database schema:
- All database primary keys expect UUID format
- Seed data uses proper UUID format (e.g., `550e8400-e29b-41d4-a716-446655440001`)
- Foreign key relationships use UUID references

## Future Considerations

When adding new features that require UUID generation:
1. Add appropriate generator function to `src/utils/uuid.ts`
2. Import and use in the relevant service
3. Update this documentation
4. Ensure backend API expects the UUID format